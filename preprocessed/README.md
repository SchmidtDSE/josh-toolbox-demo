# Preprocessed Data

This directory contains **Josh-ready binary files** (`.jshd`) created from input rasters.

## Canonical Files

| File | Source | Generated By |
|------|--------|--------------|
| `fire_severity.jshd` | `data/fire_severity.tif` | `demo_workflow.ipynb` cell "preprocess-fire" |
| `elevation.jshd` | `data/elevation.tif` | `demo_workflow.ipynb` cell "preprocess-fire" |

## Preprocessing Command

The Josh preprocessor converts GeoTIFF rasters to optimized binary format:

```bash
java -jar jar/joshsim-fat-prod.jar preprocess \
    vegetation_model.josh Main \
    data/fire_severity.tif 0 ratio \
    preprocessed/fire_severity.jshd \
    --timestep 0
```

Parameters:
- `vegetation_model.josh Main`: Model file and simulation name (defines grid)
- `data/fire_severity.tif`: Input raster
- `0`: Fill value for nodata
- `ratio`: Unit to assign to values (or `percent` for elevation)
- `preprocessed/fire_severity.jshd`: Output file
- `--timestep 0`: Load at simulation step 0

## Regenerating Files

Run the preprocessing cell in `demo_workflow.ipynb` (cell "preprocess-fire") after any changes to input rasters.

## Notes

- JSHD files are binary and grid-aligned to the Josh simulation
- Must regenerate if grid size changes in `vegetation_model.josh`
- Order: Always regenerate TIF first, then JSHD
